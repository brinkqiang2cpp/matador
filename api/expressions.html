---
title: Expressions
---
<!-- Generated by Doxygen 1.8.12 -->
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">Expressions </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><h1><a class="anchor" id="expression_sec"></a>
Find and Filter Objects</h1>
<p>When working with an <a class="el" href="/api/classoos_1_1object__view/index.html" title="Create a view for a concrete serializable type. ">oos::object_view</a> you may want to find a certain object or you want to apply a function only for some of the objects in the view.</p>
<p>To achieve this we can use the <a class="el" href="/api/classoos_1_1object__view/index.html#a48ce42747c59e8b18a7b55d648203773">oos::object_view::find_if</a> method or we can use the global <a class="el" href="/api/namespaceoos/index.html#acd4f890787ea782134f637c02b1b3967" title="Applies a function if element is valid with given predicate. ">for_each_if()</a> function. But how can we define or filter criterium?</p>
<p>First add some elements (persons) to the store and create the view. As you can see we've extended the person class with an age attribute.</p>
<div class="fragment"><div class="line"><span class="comment">// add some persons</span></div><div class="line">ostore.insert(<span class="keyword">new</span> person(<span class="stringliteral">&quot;joe&quot;</span>, 45))</div><div class="line">ostore.insert(<span class="keyword">new</span> person(<span class="stringliteral">&quot;walter&quot;</span>, 56));</div><div class="line">ostore.insert(<span class="keyword">new</span> person(<span class="stringliteral">&quot;helen&quot;</span>, 37));</div><div class="line">ostore.insert(<span class="keyword">new</span> person(<span class="stringliteral">&quot;tim&quot;</span>, 14));</div><div class="line">ostore.insert(<span class="keyword">new</span> person(<span class="stringliteral">&quot;linda&quot;</span>, 25));</div><div class="line">ostore.insert(<span class="keyword">new</span> person(<span class="stringliteral">&quot;lea&quot;</span>, 30));</div><div class="line">ostore.insert(<span class="keyword">new</span> person(<span class="stringliteral">&quot;georg&quot;</span>, 42));</div><div class="line"> </div><div class="line"><span class="keyword">typedef</span> <a class="code" href="/api/classoos_1_1object__view/index.html">oos::object_view&lt;person&gt;</a> person_view_t;</div><div class="line"><span class="keyword">typedef</span> person_view_t::iterator iterator;</div><div class="line"></div><div class="line">person_view_t pview(ostore);</div></div><!-- fragment --><p>If we want to find the person of age 25 we can achieve this by using the <a class="el" href="/api/classoos_1_1object__view/index.html#a48ce42747c59e8b18a7b55d648203773">oos::object_view::find_if</a> method. But first we have to create a variable holding the method of our object which should be used for comparation. Here it is person::age().</p>
<div class="fragment"><div class="line"><span class="comment">// create the variable</span></div><div class="line"><a class="code" href="/api/classoos_1_1variable/index.html">oos::variable&lt;int&gt;</a> x(<a class="code" href="/api/namespaceoos/index.html#a7a419ee9e956cf0407626659139f3e71">oos::make_var</a>(&amp;person::age));</div><div class="line"></div><div class="line"><span class="comment">// find the person of age 25</span></div><div class="line">iterator i = pview.find_if(x == 25);</div></div><!-- fragment --><p>The call returns the first occurence of the object matching the expression or the end iterator.</p>
<p>If you want to apply a function to all objects matching a certain expression use <a class="el" href="/api/namespaceoos/index.html#acd4f890787ea782134f637c02b1b3967" title="Applies a function if element is valid with given predicate. ">oos::for_each_if()</a> and use it in the following described way.</p>
<div class="fragment"><div class="line"><span class="comment">// print all persons with age between 20 and 60 years</span></div><div class="line"><span class="keywordtype">void</span> print(<span class="keyword">const</span> person_ptr &amp;p)</div><div class="line">{</div><div class="line">  std::cout &lt;&lt; p-&gt;name() &lt;&lt; <span class="stringliteral">&quot; is between 40 and 60.\n&quot;</span>;</div><div class="line">}</div><div class="line"></div><div class="line"><span class="comment">// declare a variable/literal for the age</span></div><div class="line"><a class="code" href="/api/classoos_1_1variable/index.html">oos::variable&lt;int&gt;</a> x(<a class="code" href="/api/namespaceoos/index.html#a7a419ee9e956cf0407626659139f3e71">oos::make_var</a>(&amp;person::age));</div><div class="line"></div><div class="line"><span class="comment">// use the for_each_if function</span></div><div class="line"><a class="code" href="/api/namespaceoos/index.html#acd4f890787ea782134f637c02b1b3967">for_each_if</a>(pview.begin(), pview.end(), x &gt; 20 &amp;&amp; x &lt; 60, print);</div></div><!-- fragment --><p>All persons whos age lays between 40 and 60 are printed. </p>
</div></div><!-- contents -->
