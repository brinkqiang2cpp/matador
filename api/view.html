---
layout: reference
title: Object Views
---
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',false,false,'search.php','Search');
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">Object Views </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><h1><a class="anchor" id="object_view_sec"></a>
Open a view</h1>
<p>In most cases we want to iterate over all objects of a certain type. How can we achieve this? We open a view for the type we want to inspect.</p>
<p>Again we use our little person class and insert some persons into our store.</p>
<div class="fragment"><div class="line"><span class="comment">// add some friends</span></div><div class="line">ostore.insert(<span class="keyword">new</span> person(<span class="stringliteral">&quot;joe&quot;</span>))</div><div class="line">ostore.insert(<span class="keyword">new</span> person(<span class="stringliteral">&quot;walter&quot;</span>));</div><div class="line">ostore.insert(<span class="keyword">new</span> person(<span class="stringliteral">&quot;helen&quot;</span>));</div><div class="line">ostore.insert(<span class="keyword">new</span> person(<span class="stringliteral">&quot;tim&quot;</span>));</div></div><!-- fragment --><p>Than we create a view with the oos::object_view class. This class takes as the template parameter the desired class type. Then we can use the view like a STL list containing oos::object_ptr of our desired type.</p>
<div class="fragment"><div class="line"><span class="comment">// shortcut to the person view</span></div><div class="line"><span class="keyword">typedef</span> oos::object_view&lt;person&gt; person_view_t;</div><div class="line"></div><div class="line">person_view_t pview(ostore);</div><div class="line"></div><div class="line">person_view_t::iterator i = pview.begin();</div><div class="line"><span class="keywordflow">for</span> (i; i != pview.end(); ++i) {</div><div class="line">  std::cout &lt;&lt; i-&gt;name() &lt;&lt; std::endl;</div><div class="line">}</div></div><!-- fragment --><p>But this class can to somethig more for us. If we have a hierarchy of classes, we can create a view of the base type and easily iterate overall sub-types.</p>
<p>Look at the next example. We have a hierachy with the person class as base class and inherited from that we have classes student and employee. And again we create a view of type person to access all objects of type person including sub-types student and employee.</p>
<div class="fragment"><div class="line"><span class="keyword">class </span>student : <span class="keyword">public</span> person { <span class="comment">//... };</span></div><div class="line"><span class="keyword">class </span>employee : <span class="keyword">public</span> person { <span class="comment">//... };</span></div><div class="line"></div><div class="line">oos::object_store ostore;</div><div class="line">ostore.insert_prototype&lt;person&gt;(<span class="stringliteral">&quot;person&quot;</span>);</div><div class="line">ostore.insert_prototype&lt;student, person&gt;(<span class="stringliteral">&quot;student&quot;</span>);</div><div class="line">ostore.insert_prototype&lt;employee, person&gt;(<span class="stringliteral">&quot;employee&quot;</span>);</div><div class="line"></div><div class="line"><span class="keyword">typedef</span> oos::object_view&lt;person&gt; person_view_t;</div><div class="line"></div><div class="line">person_view_t pview(ostore);</div><div class="line"></div><div class="line">person_view_t::iterator i = pview.begin();</div><div class="line"><span class="keywordflow">for</span> (i; i != pview.end(); ++i) {</div><div class="line">  std::cout &lt;&lt; i-&gt;name() &lt;&lt; std::endl;</div><div class="line">}</div></div><!-- fragment --> </div></div><!-- contents -->
